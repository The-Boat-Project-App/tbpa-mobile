{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { NativeWindStyleSheet as _NativeWindStyleSheet } from \"nativewind\";\nimport { StyledComponent as _StyledComponent } from \"nativewind\";\nimport React, { useState, useCallback } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport useWindowDimensions from \"react-native-web/dist/exports/useWindowDimensions\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport RenderHtml from 'react-native-render-html';\nimport ScreenHeader from \"../../components/ScreenHeader/ScreenHeader\";\nimport CustomAvatar from \"../../components/CustomAvatar/CustomAvatar\";\nimport Applause from \"../../components/Applause/Applause\";\nimport { useGetPostsByIdQuery } from \"../../graphql/graphql\";\nimport moment from 'moment';\nimport LoadingView from \"../../components/LoadingView/LoadingView\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar PostScreen = function PostScreen(props) {\n  var _useGetPostsByIdQuery = useGetPostsByIdQuery({\n      variables: {\n        id: props.route.params.postId\n      }\n    }),\n    data = _useGetPostsByIdQuery.data,\n    refetch = _useGetPostsByIdQuery.refetch;\n  console.log(props.route.params.postId);\n  var _useState = useState(data == null ? void 0 : data.Posts.likes),\n    _useState2 = _slicedToArray(_useState, 2),\n    likes = _useState2[0],\n    setLikes = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    refreshing = _useState4[0],\n    setRefreshing = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isBookmarked = _useState6[0],\n    setIsBookmarked = _useState6[1];\n  var _useWindowDimensions = useWindowDimensions(),\n    height = _useWindowDimensions.height,\n    width = _useWindowDimensions.width;\n  var wait = function wait(timeout) {\n    return new Promise(function (resolve) {\n      return setTimeout(resolve, timeout);\n    });\n  };\n  var onRefresh = useCallback(function () {\n    setRefreshing(true);\n    wait(2000).then(function () {\n      refetch(), setRefreshing(false);\n    });\n  }, []);\n  var source = {\n    html: \"<div style=\\\"text-align:justify;\\\">\" + (data == null ? void 0 : data.Posts.content) + \"</div>\"\n  };\n  var tagsStyles = {\n    body: {\n      whiteSpace: 'normal',\n      color: '#494848'\n    },\n    a: {\n      color: '#87BC23'\n    }\n  };\n  if (!data) {\n    return _jsx(LoadingView, {});\n  }\n  return _jsxs(_StyledComponent, {\n    className: \"flex-1 bg-white\",\n    component: SafeAreaView,\n    children: [_jsx(ScreenHeader, {}), _jsx(ScrollView, {\n      showsVerticalScrollIndicator: false,\n      refreshControl: _jsx(RefreshControl, {\n        refreshing: refreshing,\n        onRefresh: onRefresh,\n        tintColor: \"#87BC23\",\n        colors: ['#87BC23', '#139DB8']\n      }),\n      children: _jsxs(_StyledComponent, {\n        className: \"justify-center bg-white px-3 \",\n        component: View,\n        children: [(data == null ? void 0 : data.Posts.title) && _jsx(_StyledComponent, {\n          className: \"text-xl color-deepBlue font-ralewayBold  ml-3 mb-4 text-center\",\n          component: Text,\n          children: data == null ? void 0 : data.Posts.title\n        }), _jsx(_StyledComponent, {\n          className: \"h-40 rounded-md \",\n          source: {\n            uri: data == null ? void 0 : data.Posts.mainPicture\n          },\n          component: Image\n        }), _jsx(_StyledComponent, {\n          className: \"flex-row justify-between mt-2 \",\n          component: View,\n          children: _jsx(_StyledComponent, {\n            className: \"-mt-12\",\n            component: View,\n            children: _jsx(CustomAvatar, {\n              userId: data == null ? void 0 : data.Posts.author.id,\n              isConnected: true,\n              avatarPicture: data == null ? void 0 : data.Posts.author.avatar\n            })\n          })\n        }), _jsx(_StyledComponent, {\n          className: \"text-md color-deepBlue font-ralewayBold  \",\n          component: Text,\n          children: data == null ? void 0 : data.Posts.author.firstName\n        }), _jsx(_StyledComponent, {\n          className: \"text-xs color-deepBlue font-raleway  mb-4\",\n          component: Text,\n          children: moment().diff(data == null ? void 0 : data.Posts.createdAt, 'days') <= 2 ? moment(data == null ? void 0 : data.Posts.createdAt).fromNow() : moment(data == null ? void 0 : data.Posts.createdAt).format('LL')\n        }), (data == null ? void 0 : data.Posts.content) && _jsx(RenderHtml, {\n          contentWidth: width,\n          tagsStyles: tagsStyles,\n          source: source\n        })]\n      })\n    }), (data == null ? void 0 : data.Posts.likes) && _jsx(Applause, {\n      likes: data == null ? void 0 : data.Posts.likes,\n      postId: data == null ? void 0 : data.Posts.id\n    })]\n  });\n};\nexport default PostScreen;\n_NativeWindStyleSheet.create({\n  styles: {\n    \"z-40\": {\n      \"zIndex\": 40\n    },\n    \"ml-3\": {\n      \"marginLeft\": 12\n    },\n    \"mb-4\": {\n      \"marginBottom\": 16\n    },\n    \"mr-2\": {\n      \"marginRight\": 8\n    },\n    \"-mb-4\": {\n      \"marginBottom\": -16\n    },\n    \"mt-2\": {\n      \"marginTop\": 8\n    },\n    \"-mt-12\": {\n      \"marginTop\": -48\n    },\n    \"h-40\": {\n      \"height\": 160\n    },\n    \"flex-1\": {\n      \"flexGrow\": 1,\n      \"flexShrink\": 1,\n      \"flexBasis\": \"0%\"\n    },\n    \"flex-row\": {\n      \"flexDirection\": \"row\"\n    },\n    \"justify-center\": {\n      \"justifyContent\": \"center\"\n    },\n    \"justify-between\": {\n      \"justifyContent\": \"space-between\"\n    },\n    \"self-end\": {\n      \"alignSelf\": \"flex-end\"\n    },\n    \"rounded-md\": {\n      \"borderTopLeftRadius\": 6,\n      \"borderTopRightRadius\": 6,\n      \"borderBottomRightRadius\": 6,\n      \"borderBottomLeftRadius\": 6\n    },\n    \"bg-white\": {\n      \"backgroundColor\": \"#FFFFFF\"\n    },\n    \"px-3\": {\n      \"paddingLeft\": 12,\n      \"paddingRight\": 12\n    },\n    \"text-center\": {\n      \"textAlign\": \"center\"\n    },\n    \"font-ralewayBold\": {\n      \"fontFamily\": \"Raleway_Bold\"\n    },\n    \"font-raleway\": {\n      \"fontFamily\": \"Raleway_400Regular\"\n    },\n    \"color-deepBlue\": {\n      \"color\": \"#272E67\"\n    },\n    \"text-xl\": {\n      \"fontSize\": 20,\n      \"lineHeight\": 28\n    },\n    \"text-xs\": {\n      \"fontSize\": 12,\n      \"lineHeight\": 16\n    }\n  }\n});","map":{"version":3,"names":["React","useState","useCallback","SafeAreaView","RenderHtml","ScreenHeader","CustomAvatar","Applause","useGetPostsByIdQuery","moment","LoadingView","PostScreen","props","variables","id","route","params","postId","data","refetch","console","log","Posts","likes","setLikes","refreshing","setRefreshing","isBookmarked","setIsBookmarked","useWindowDimensions","height","width","wait","timeout","Promise","resolve","setTimeout","onRefresh","then","source","html","content","tagsStyles","body","whiteSpace","color","a","title","uri","mainPicture","author","avatar","firstName","diff","createdAt","fromNow","format"],"sources":["/Users/matthieu/Documents/tbpa-mobile/screens/PostScreen/PostScreen.tsx"],"sourcesContent":["import React, { useState, useCallback } from 'react'\nimport { View, Text, Image, useWindowDimensions, ScrollView, RefreshControl } from 'react-native'\nimport { SafeAreaView } from 'react-native-safe-area-context'\nimport RenderHtml from 'react-native-render-html'\nimport ScreenHeader from '@components/ScreenHeader/ScreenHeader'\nimport CustomAvatar from '@components/CustomAvatar/CustomAvatar'\nimport Toggle from '@components/Toggle/Toggle'\nimport Applause from '@components/Applause/Applause'\nimport { BookmarkIcon } from 'react-native-heroicons/solid'\nimport { BookmarkIcon as BookmarkIconOutline } from 'react-native-heroicons/outline'\nimport { useGetPostsByIdQuery } from '../../graphql/graphql'\nimport moment from 'moment'\nimport localization from 'moment/locale/fr'\nimport LoadingView from '@components/LoadingView/LoadingView'\n\ninterface PostScreenProps {}\n\nconst PostScreen: React.FunctionComponent<PostScreenProps> = (props) => {\n  const { data, refetch } = useGetPostsByIdQuery({\n    variables: { id: props.route.params.postId },\n  })\n\n  console.log(props.route.params.postId)\n  const [likes, setLikes] = useState<number>(data?.Posts.likes)\n  const [refreshing, setRefreshing] = useState<boolean>(false)\n  const [isBookmarked, setIsBookmarked] = useState<boolean>(false)\n\n  const { height, width } = useWindowDimensions()\n  const wait = (timeout) => {\n    return new Promise((resolve) => setTimeout(resolve, timeout))\n  }\n  const onRefresh = useCallback(() => {\n    setRefreshing(true)\n\n    wait(2000).then(() => {\n      refetch(), setRefreshing(false)\n    })\n  }, [])\n\n  const source = {\n    html: `<div style=\"text-align:justify;\">${data?.Posts.content}</div>`,\n  }\n  // Modification du style du rendu HTML\n  const tagsStyles = {\n    body: {\n      whiteSpace: 'normal',\n      color: '#494848',\n    },\n    a: {\n      color: '#87BC23',\n    },\n  }\n  if (!data) {\n    return <LoadingView />\n  }\n  return (\n    <SafeAreaView className='flex-1 bg-white'>\n      <ScreenHeader />\n      <ScrollView\n        showsVerticalScrollIndicator={false}\n        refreshControl={\n          <RefreshControl\n            refreshing={refreshing}\n            onRefresh={onRefresh}\n            tintColor='#87BC23'\n            colors={['#87BC23', '#139DB8']}\n          />\n        }\n      >\n        <View className='justify-center bg-white px-3 '>\n          {data?.Posts.title && (\n            <Text className='text-xl color-deepBlue font-ralewayBold  ml-3 mb-4 text-center'>\n              {data?.Posts.title}\n            </Text>\n          )}\n          {/* <View className='self-end mr-2 -mb-4 z-40'>\n            {isBookmarked ? (\n              <BookmarkIcon\n                size={30}\n                onPress={() => setIsBookmarked(!isBookmarked)}\n                color='#0C617D'\n              />\n            ) : (\n              <BookmarkIconOutline\nscreens/UserScreen/UserScreen.tsx                size={30}\n                fill='white'\n                onPress={() => setIsBookmarked(!isBookmarked)}\n                color='#0C617D'\n              />\n            )}\n          </View> */}\n          <Image\n            className='h-40 rounded-md '\n            source={{\n              uri: data?.Posts.mainPicture,\n            }}\n          />\n          <View className='flex-row justify-between mt-2 '>\n            <View className='-mt-12'>\n              <CustomAvatar\n                userId={data?.Posts.author.id}\n                isConnected={true}\n                avatarPicture={data?.Posts.author.avatar}\n              />\n            </View>\n            {/* <View className='flex-row justify-center'>\n              <Toggle isEnabled={false} />\n            </View> */}\n          </View>\n          <Text className='text-md color-deepBlue font-ralewayBold  '>\n            {data?.Posts.author.firstName}\n          </Text>\n          <Text className='text-xs color-deepBlue font-raleway  mb-4'>\n            {moment().diff(data?.Posts.createdAt, 'days') <= 2\n              ? moment(data?.Posts.createdAt).fromNow()\n              : moment(data?.Posts.createdAt).format('LL')}\n          </Text>\n          {data?.Posts.content && (\n            <RenderHtml contentWidth={width} tagsStyles={tagsStyles} source={source} />\n          )}\n        </View>\n      </ScrollView>\n      {data?.Posts.likes && <Applause likes={data?.Posts.likes} postId={data?.Posts.id} />}\n    </SafeAreaView>\n  )\n}\n\nexport default PostScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}